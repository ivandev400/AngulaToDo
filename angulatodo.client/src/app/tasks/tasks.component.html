<div class="container-fluid">
  <div class="row">
    <!-- Sidebar Panel -->
    <nav id="sidebarMenu" class="col-md-3 col-lg-1 d-md-block bg-dark sidebar text-white">
      <div class="position-sticky pt-3">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link active text-white py-2" aria-current="page" href="#">
              <i class="fas fa-star"></i> Important
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white py-2" href="#">
              <i class="fas fa-calendar-day"></i> Due Date
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white py-2" href="#">
              <i class="fas fa-sun"></i> Daily
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white py-2" href="#">
              <i class="fas fa-tasks"></i> All Tasks
            </a>
          </li>
        </ul>
        <div class="nav-item mt-auto position-sticky pt-3">
          <a class="nav-link text-danger py-2" href="/logout">
            <i class="fas fa-sign-out-alt"></i> Logout
          </a>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">Tasks</h1>
      </div>

      <!-- Add a new task input -->
      <div class="input-group mb-3">
        <!-- Task Title Input -->
        <input [(ngModel)]="newTaskTitle"
               type="text"
               class="form-control"
               placeholder="Add a task"
               aria-label="Task Title"
               aria-describedby="addTaskBtn" />

        <!-- Task Due Date Input -->
        <input [(ngModel)]="newTaskDueDate"
               type="date"
               class="form-control"
               placeholder="Due Date"
               aria-label="Task Due Date"
               aria-describedby="addTaskBtn" />

        <!-- Task Importance Checkbox -->
        <div class="form-check form-switch">
          <input class="form-check-input"
                 type="checkbox"
                 id="importantTaskCheck"
                 [(ngModel)]="newTaskImportant" />
          <label class="form-check-label" for="importantTaskCheck">
            Important
          </label>
        </div>

        <!-- Add Button -->
        <button class="btn btn-outline-secondary" type="button" (click)="addTask()">
          Add
        </button>
      </div>

      <!-- Task List -->
      <div class="table-responsive">
        <table class="table table-striped table-sm">
          <thead>
            <tr>
              <th>Title</th>
              <th>Due Date</th>
              <th>Importance</th>
              <th>Completed</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let task of tasks">
              <!-- Task title -->
              <td>
                <input [(ngModel)]="task.title"
                       type="text"
                       class="form-control"
                       placeholder="Task title" />
              </td>

              <!-- Due date -->
              <td>
                <input [(ngModel)]="task.dueDate"
                       type="date"
                       class="form-control"
                       placeholder="Due Date" />
              </td>

              <!-- Importance (flag/star icon) -->
              <td>
                <button class="btn"
                        [ngClass]="{ 'text-warning': task.important, 'text-muted': !task.important }"
                        (click)="toggleImportance(task)">
                  <i class="fa" [ngClass]="task.important ? 'fa-star' : 'fa-star-o'"></i>
                </button>
              </td>

              <!-- Completed (Checkbox) -->
              <td>
                <input type="checkbox"
                       [(ngModel)]="task.completed"
                       (change)="toggleCompleted(task)" />
              </td>

              <!-- Actions (Edit/Delete) -->
              <td>
                <a [routerLink]="['/tasks', userId, 'edit', task.id]" class="btn btn-sm btn-warning">Edit</a>
                <button (click)="deleteTask(task.id)" class="btn btn-sm btn-danger">Delete</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </main>
  </div>
</div>
